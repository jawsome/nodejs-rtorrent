<div class="modal-header">
    <h3>Editing '{{feedsEditCtrl.feed.title}}'</h3>
</div>
<div class="modal-body">
	<form name="editFeed" novalidate>
		<p ng-show="feedsAddCtrl.error" class="bg-danger text-danger" ng-cloak><strong>Error: </strong>{{feedsEditCtrl.error}}</p>
		<div class="form-group" ng-class="{ 'has-error': editFeed.feedName.$invalid }">
			<label for="feedName">Title:</label>
			<input type="text" class="form-control" id="feedName" name="feedName" ng-model="feedsEditCtrl.feed.title" required />
			<p class="help-block" ng-show="editFeed.feedName.$error.required" class="has-error">Please enter in a name.</p>
		</div>
		<div class="form-group">
			<label for="feedUrl">URL:</label>
			<p class="form-control-static">{{feedsEditCtrl.feed.rss}}</p>
		</div>
		<div class="checkbox">
				<label for="changeTorrentLocation"><input type="checkbox" id="changeTorrentLocation" ng-model="feedsEditCtrl.changeTorrentLocation"> Change torrent download location</label>
				<p class="help-block">Check box to change the location of where the torrent is downloaded. The default is the download directory set by rtorrent.</p>
			</div>
			<div class="form-group" ng-if="feedsEditCtrl.changeTorrentLocation">
				<label for="torrentPath" class="control-label">Torrent save directory:</label>
				<input type="text" id="torrentPath" name="torrentPath" class="form-control" placeholder="Path to download torrent" ng-model="feedsEditCtrl.feed.path" required>
			</div>

		<div class="checkbox">
			<label for="autoDownload"><input type="checkbox" id="autoDownload" ng-model="feedsEditCtrl.feed.autoDownload"> Auto Download</label>
			<p class="help-block">Check box to automatically download torrents when the feed is updated.</p>
		</div>
		<div class="checkbox">
			<label for="hasRegexFilter"><input type="checkbox" id="hasRegexFilter" ng-model="feedsEditCtrl.hasRegexFilter"> Add advanced filtering</label>
			<p class="help-block">Check box to edit regex filters.</p>
		</div>
	</form>
	<div ng-if="feedsEditCtrl.hasRegexFilter">
		<form name="regexFilter" novalidate>
			<h4>Regex Filters</h4>
			<div class="form-inline" style="margin-bottom: 10px;">
				<div class="form-group">
					<input type="text" class="form-control" placeholder="Regular expression" name="regexFilter.regex" ng-model="feedsEditCtrl.newFilter.regex" style="width: 320px;" required>
				</div>
				<div class="form-group">
					<label for="filterTypeInclude" class="radio-inline">
						<input type="radio" id="filterTypeInclude" name="regexFilter.type" ng-model="feedsEditCtrl.newFilter.type" value="include" required> Include
					</label>
					<label for="filterTypeExclude" class="radio-inline">
						<input type="radio" id="filterTypeExclude" name="regexFilter.type" ng-model="feedsEditCtrl.newFilter.type" value="exclude" required> Exclude
					</label>
				</div>
				<button type="button" class="btn btn-default" ng-click="feedsEditCtrl.addFilter(feedsEditCtrl.newFilter)" ng-disabled="regexFilter.$invalid"><i class="fa fa-plus"></i></button>
			</div>
			<ul class="list-unstyled feed__filter-list">
				<li ng-repeat="filter in feedsEditCtrl.feed.filters track by $index" class="filter"><span class="filter-regex">{{filter.regex}}</span><span class="filter-type badge">{{filter.type}}</span> <a href="javascript: void(0);" ng-click="feedsEditCtrl.editFilter($index)"><i class="fa fa-pencil"></i></a><a href="javascript: void(0);" ng-click="feedsEditCtrl.deleteFilter($index)"><i class="fa fa-times"></i></a></li>
			</ul>
		</form>
	</div>
</div>
<div class="modal-footer">
	<div class="form-group">
		<button type="button" class="btn btn-primary" ng-click="feedsEditCtrl.editFeed(feedsEditCtrl.feed)" ng-disabled="feedsEditCtrl.checkDisabled()">Save changes</button>
		<button type="button" class="btn btn-default" ng-click="feedsEditCtrl.cancel()">Cancel</button>
	</div>
</div>
